<div class="container-fluid px-3">
    <h1>WELCOME, {{ user }}</h1>
    <h2>¬øQu√© quieres hacer hoy?</h2>

    <div class="row justify-content-center g-4">
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card h-100">
                <img src="assets/images/menu/create.jpg" class="card-img-top" alt="Crear men√∫">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Crear Menu</h5>
                    <p class="card-text flex-grow-1">Dise√±a men√∫s √∫nicos y atractivos. Agrega platos especiales, categoriza por tipo de
                        comida y crea experiencias gastron√≥micas memorables para tus clientes.</p>
                    <button (click)="toggleCreateForm()" class="btn btn-primary mt-auto">
                        {{ showCreateForm ? 'Ocultar Formulario' : 'Crear Men√∫' }}
                    </button>
                </div>
            </div>
        </div>

        <!-- Formulario para crear men√∫s -->
        <div class="col-12" *ngIf="showCreateForm">
            <div class="card create-menu-card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">üçΩÔ∏è Crear Nuevo Men√∫</h4>
                </div>
                <div class="card-body">
                    <form [formGroup]="createMenuForm" (ngSubmit)="onSubmitCreateMenu()">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="name" class="form-label">Nombre del men√∫ *</label>
                                    <input 
                                        type="text" 
                                        class="form-control" 
                                        id="name" 
                                        formControlName="name"
                                        placeholder="Ej: Pizza Margherita">
                                    <div class="text-danger" *ngIf="createMenuForm.get('name')?.invalid && createMenuForm.get('name')?.touched">
                                        El nombre es requerido
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="price" class="form-label">Precio *</label>
                                    <input 
                                        type="number" 
                                        class="form-control" 
                                        id="price" 
                                        formControlName="price"
                                        placeholder="0.00"
                                        step="0.01"
                                        min="0">
                                    <div class="text-danger" *ngIf="createMenuForm.get('price')?.invalid && createMenuForm.get('price')?.touched">
                                        El precio es requerido y debe ser mayor a 0
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="category" class="form-label">Categor√≠a *</label>
                                    <select class="form-control" id="category" formControlName="category">
                                        <option value="">Selecciona una categor√≠a</option>
                                        <option value="appetizer">appetizer</option>
                                        <option value="main course">main course</option>
                                        <option value="dessert">dessert</option>
                                        <option value="beverages">beverages</option>
                                        
                                    </select>
                                    <div class="text-danger" *ngIf="createMenuForm.get('category')?.invalid && createMenuForm.get('category')?.touched">
                                        La categor√≠a es requerida
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="description" class="form-label">Descripci√≥n *</label>
                                    <textarea 
                                        class="form-control" 
                                        id="description" 
                                        formControlName="description"
                                        rows="4"
                                        placeholder="Describe los ingredientes y preparaci√≥n..."></textarea>
                                    <div class="text-danger" *ngIf="createMenuForm.get('description')?.invalid && createMenuForm.get('description')?.touched">
                                        La descripci√≥n es requerida
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="image" class="form-label">URL de imagen</label>
                                    <input 
                                        type="url" 
                                        class="form-control" 
                                        id="image" 
                                        formControlName="image"
                                        placeholder="https://ejemplo.com/imagen.jpg">
                                </div>

                                <div class="mb-3">
                                    <div class="form-check">
                                        <input 
                                            class="form-check-input" 
                                            type="checkbox" 
                                            id="available" 
                                            formControlName="available">
                                        <label class="form-check-label" for="available">
                                            Disponible en el men√∫
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-12">
                                <div class="d-flex gap-3 justify-content-end">
                                    <button 
                                        type="button" 
                                        class="btn btn-secondary" 
                                        (click)="resetCreateForm()">
                                        üîÑ Limpiar
                                    </button>
                                    <button 
                                        type="submit" 
                                        class="btn btn-success" 
                                        [disabled]="createMenuForm.invalid || isSubmitting">
                                        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2"></span>
                                        {{ isSubmitting ? 'Creando...' : '‚úÖ Crear Men√∫' }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card h-100">
                <img src="assets/images/menu/leer.jpg" class="card-img-top" alt="Consultar men√∫">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Consultar Menu</h5>
                    <p class="card-text flex-grow-1">Explora tu cat√°logo completo de platillos, precios y disponibilidad. Obt√©n una vista
                        detallada de toda tu oferta gastron√≥mica en tiempo real.</p>
                    <button (click)="toggleMenusList()" class="btn btn-primary mt-auto">
                        {{ showMenus ? 'Ocultar Men√∫s' : 'Consultar Men√∫s' }}
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Secci√≥n para mostrar los men√∫s -->
    <div class="row mt-5" *ngIf="showMenus && menus && menus.length > 0">
        <div class="col-12">
            <h2>üìã Men√∫s Disponibles</h2>
            <div class="row g-3">
                <div class="col-12 col-md-6 col-lg-4" *ngFor="let menu of menus">
                    <div class="card menu-item-card">
                        <div class="card-body">
                            <h5 class="card-title">{{ menu.name || menu.nombre || 'Men√∫ sin nombre' }}</h5>
                            <p class="card-text">
                                <strong>Precio:</strong> {{ menu.price || menu.precio | currency:'USD':'symbol':'1.2-2' }}<br>
                                <strong>Descripci√≥n:</strong> {{ menu.description || menu.descripcion || 'Sin descripci√≥n' }}<br>
                                <strong>Categor√≠a:</strong> {{ menu.category || menu.categoria || 'Sin categor√≠a' }}
                            </p>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-primary btn-sm" (click)="editMenu(menu)">
                                    ‚úèÔ∏è Editar
                                </button>
                                <button class="btn btn-outline-danger btn-sm" (click)="deleteMenu(menu.id || menu._id)">
                                    üóëÔ∏è Eliminar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje cuando no hay men√∫s -->
    <div class="row mt-5" *ngIf="showMenus && (!menus || menus.length === 0)">
        <div class="col-12 text-center">
            <div class="alert alert-info">
                <h4>üìù No hay men√∫s creados</h4>
                <p>¬°Crea tu primer men√∫ usando el bot√≥n "Crear Menu" de arriba!</p>
            </div>
        </div>
    </div>
</div>